{% extends 'base.html' %}

{% block title %}Homologação de Servidores{% endblock %}

{% block styles %}
<style>
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    .btn-approve { background-color: #28a745; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px; }
    .btn-reject { background-color: #dc3545; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px; }
</style>
{% endblock %}

{% block content %}
    <h1>Servidores Aguardando Homologação</h1>

    <table>
        <thead>
            <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>SIAPE</th>
                <th>Status Atual</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for perfil in servidores_pendentes %}
            <tr>
                <td>{{ perfil.user.get_full_name|default:perfil.user.username }}</td>
                <td>{{ perfil.cpf }}</td>
                <td>{{ perfil.siape }}</td>
                <td>{{ perfil.status }}</td>
                <td>
                    <form action="{% url 'aprovar_servidor' pk=perfil.pk %}" method="POST" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn-approve">Aprovar</button>
                    </form>
                    <form action="{% url 'recusar_servidor' pk=perfil.pk %}" method="POST" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn-reject" onclick="return confirm('Tem certeza que deseja recusar este servidor?')">Recusar</button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">Nenhum servidor pendente de homologação.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <br>
    <a href="{% url 'painel' %}">Voltar ao Painel</a>
{% endblock %}